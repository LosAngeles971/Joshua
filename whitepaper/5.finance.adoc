== Dynamic knowledge and real time problems

In the previous chapters, a predefined knowledge was build to find out the one solution of a problem. Nevertheless, some problems may have different solutions and such solutions may depend on time.

For example, assuming to use Joshua in the financial trading, problems could be defined by events like "The stock is undervalued" and "Sell signal". In those cases the knowledge should not be static, at least the problem should have an initial state that depends on time.

Below diagram shows a possible approach. 

image::./images/financial_approach.png[]

The knowledge includes a set of predefined cause-effect relationships and relationships coming from a real time analysis of data.
The initial state is the result of a process of gathering and analysis of real time data.
Finally the problem is decided on the spot.

Just as an example, below a hypothetic set of predefined financial cause-effect relationships.

[source, yaml]
----
  knowlegde:
    - id: "P/B less or equal to 1"
      # This ratio compares the current price of stocks with the book value per share of the stock. 
      # Look for the book value per share on the companyâ€™s balance sheet or on a stock website. Ratios under 1 are undervalued.
      conditions:
        - PB <= 1.0
      effects:
        - weight: 0.5
          event: "The stock is undervalued"
      assignments:
        - Undervalued = Undervalued + 1
    
    - id: "debt-to-asset ratio of 1.10 or less"
      # This means that they have more assets than they have debt. This is a sign of a strong company and a good stock.
      conditions:
        - DA <= 1.10
      effects:
        - weight: 0.5
          event: "The stock is undervalued"
      assignments:
        - Undervalued = Undervalued + 1

    - id: "P/E less than sector reference"
      # This means that they have more assets than they have debt. This is a sign of a strong company and a good stock.
      conditions:
        - PE < PE_ref
      effects:
        - weight: 0.5
          event: "The stock is undervalued"
      assignments:
        - Undervalued = Undervalued + 1

    - id: "PEG less than sector reference"
      # A stock's PEG ratio is the stock's P/E ratio divided by the growth rate of its earnings.
      conditions:
        - PEG < PEG_ref
      effects:
        - weight: 0.5
          event: "The stock is undervalued"
      assignments:
        - Undervalued = Undervalued + 1

    - id: "Price-to-book less than sector reference"
      # The price to book is calculated by share price divided by book value per share.
      conditions:
        - PBook < PBook_ref
      effects:
        - weight: 0.5
          event: "The stock is undervalued"
      assignments:
        - Undervalued = Undervalued + 1

    - id: "RSI greater then 0.7"
      conditions:
        - RSI > 0.7
      effects:
        - weight: 0.5
          event: "The stock is Overbought"
      assignments:
        - Overbought = Overbought + 1

    - id: "RSI is crossing over 0.5"
      conditions:
        - RSI_crossing_up == True
      effects:
        - weight: 0.5
          event: "Sell signal"
      assignments:
        - Sell_signal = Sell_signal + 1

    - id: "RSI lesser then 0.3"
      conditions:
        - RSI < 0.3
      effects:
        - weight: 0.5
          event: "The stock is Oversold"
      assignments:
        - Oversold = Oversold + 1

    - id: "RSI is crossing under 0.5"
      conditions:
        - RSI_crossing_down == True
      effects:
        - weight: 0.5
          event: "Buy signal"
      assignments:
        - Sell_signal = Sell_signal + 1

    - id: "The stock is Overbought"
      # Overbought is a term used when a security is believed to be trading at a level above its intrinsic or fair value.
      effects:
        - weight: 0.5
          event: "Sell signal"

    - id: "The stock is Oversold"
      # When a security is thought to be trading below its intrinsic value
      effects:
        - weight: 0.5
          event: "Buy signal"

    - id: "The stock is Oversold"
      # When a security is thought to be trading below its intrinsic value

    - id: "The stock is undervalued"

    - id: "The stock is overvalued"

    - id: "Sell signal"

    - id: "Buy signal"

    - id: "Hold signal"
----


