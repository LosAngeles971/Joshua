---
  automata:
    - id: body
      transitions:
        - action: call
          sub: comment
          min: 0
        - action: call
          sub: event
          min: 0

    - id: comment
      transitions:
        - action: token
          token: "/*"
        - action: token
          token: "text"
        - action: token
          token: "*/"

    - id: event
      transitions:
        - action: token
          token: "event("
        - action: token
          token: "text"
        - action: token
          token: ")"
        - action: token
          token: "{"
        - action: call
          token: "if"
          sub: "if"
          min: 1
        - action: call
          token: "then"
          sub: "then"
          min: 1
        - action: call
          token: "effects"
          sub: "effects"
          min: 1
        - action: token
          token: "}"

    - id: if
      transitions:
        - action: token
          token: "if"
        - action: token
          token: "{"
        - action: call
          sub: "ifexpression"
          min: 1
        - action: token
          token: "}"

    - id: then
      transitions:
        - action: token
          token: "then"
        - action: token
          token: "{"
        - action: call
          sub: "thenexpression"
          min: 0
        - action: token
          token: "}"
    
    - id: effects
      transitions:
        - action: token
          token: "effects"
        - action: token
          token: "{"
        - action: call
          sub: "effectexpression"
          min: 0
        - action: token
          token: "}"

    - id: ifexpression
      transitions:
        - action: token
          token: "\""
        - action: token
          token: "text"
        - action: token
          token: "\""
    
    - id: thenexpression
      transitions:
        - action: token
          token: "\""
        - action: token
          token: "text"
        - action: token
          token: "\""

    - id: effectexpression
      transitions:
        - action: token
          token: "("
        - action: token
          token: "\""
        - action: token
          token: "text"
        - action: token
          token: "\""
        - action: token
          token: ","
        - action: token
          token: "text"
        - action: token
          token: ")"